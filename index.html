<!-- index.html - トップページ専用 -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>やまさんのフリー素材屋 | 高品質素材</title>
  <meta name="description" content="UI、背景、キャラクターなど豊富なカテゴリの高品質素材を無料で提供。商用利用可能で即ダウンロード可能です。">
  <meta name="keywords" content="フリー素材,画像素材,UI素材,背景素材,無料ダウンロード,商用利用可能">
  <meta name="author" content="やまさん">
  <meta property="og:title" content="やまさんのフリー素材屋 | 高品質素材">
  <meta property="og:description" content="UI、背景、キャラクターなど豊富なカテゴリの高品質素材を無料で提供。">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yohyama0216.github.io/free-image-material/">
  <meta property="og:image" content="https://yohyama0216.github.io/free-image-material/assets/og-image.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="やまさんのフリー素材屋 | 高品質素材">
  <meta name="twitter:description" content="UI、背景、キャラクターなど豊富なカテゴリの高品質素材を無料で提供。">
  <meta name="twitter:image" content="https://yohyama0216.github.io/free-image-material/assets/og-image.jpg">
  <link rel="canonical" href="https://yohyama0216.github.io/free-image-material/">
  <link rel="icon" href="data:," />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<!-- ナビゲーション -->
<div id="nav-placeholder"></div>

<!-- ヒーローセクション -->
<section class="bg-primary text-white py-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <h1 class="display-4 fw-bold mb-3">やまさんのフリー素材屋</h1>
        <p class="lead mb-4">UI、背景、キャラクターなど豊富なカテゴリの高品質素材を無料で提供。商用利用可能で即ダウンロード可能です。</p>
        <div class="d-flex gap-3">
          <span class="badge bg-light text-dark px-3 py-2">商用利用OK</span>
          <span class="badge bg-light text-dark px-3 py-2">高品質</span>
          <span class="badge bg-light text-dark px-3 py-2">即ダウンロード</span>
        </div>
      </div>
      <div class="col-lg-6 text-center">
        <div class="bg-white bg-opacity-10 rounded p-4">
          <h3 class="h5 mb-3">🎮 素材を探す</h3>
          <div class="input-group mb-3">
            <input id="heroSearch" type="search" class="form-control" placeholder="キーワードで検索...">
            <button class="btn btn-light" type="button" onclick="performHeroSearch()">
              <i class="bi bi-search"></i> 検索
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- 統計情報 -->
<section class="py-4 bg-light">
  <div class="container">
    <div class="row text-center">
      <div class="col-md-3">
        <div class="h4 fw-bold text-primary" id="totalItems">-</div>
        <div class="text-muted">総素材数</div>
      </div>
      <div class="col-md-3">
        <div class="h4 fw-bold text-primary" id="totalCategories">-</div>
        <div class="text-muted">カテゴリ</div>
      </div>
      <div class="col-md-3">
        <div class="h4 fw-bold text-primary" id="totalTags">-</div>
        <div class="text-muted">タグ</div>
      </div>
      <div class="col-md-3">
        <div class="h4 fw-bold text-primary">CC0</div>
        <div class="text-muted">ライセンス</div>
      </div>
    </div>
  </div>
</section>

<!-- 新着素材 -->
<section class="py-5">
  <div class="container">
    <div class="text-center mb-4">
      <h2 class="h3 fw-bold">🆕 新着素材</h2>
      <p class="text-muted">最近追加された素材をチェック！</p>
    </div>
    
    <div id="latestItems" class="row g-4 mb-4">
      <!-- 新着素材が動的に表示される -->
    </div>
    
    <div class="text-center">
      <a href="list.html" class="btn btn-outline-primary btn-lg">
        すべての素材を見る →
      </a>
    </div>
  </div>
</section>

<footer class="bg-dark text-white py-4 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <h5>やまさんのフリー素材屋</h5>
        <p class="small mb-0">クリエイター向けのフリー画像素材を提供しています。</p>
      </div>
      <div class="col-md-4">
        <h6>メニュー</h6>
        <ul class="list-unstyled">
          <li><a href="#" class="text-light text-decoration-none small">About us</a></li>
          <li><a href="#" class="text-light text-decoration-none small">Privacy policy</a></li>
          <li><a href="#" class="text-light text-decoration-none small">Terms of Use</a></li>
          <li><a href="#" class="text-light text-decoration-none small">BOOTH</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h6>人気タグ</h6>
        <div id="footerTags" class="d-flex flex-wrap gap-1">
          <!-- 人気タグがここに動的に表示される -->
        </div>
      </div>
    </div>
    <hr>
    <div class="text-center">
      <small>&copy; やまさんのフリー素材屋｜無料の背景イラスト. All rights reserved.</small>
    </div>
  </div>
</footer>

<script>
// ヒーロー検索機能
function performHeroSearch() {
  const heroInput = document.getElementById("heroSearch");
  const query = heroInput.value.trim();
  
  // list.htmlに検索クエリ付きでリダイレクト
  if (query) {
    window.location.href = `list.html?q=${encodeURIComponent(query)}`;
  } else {
    window.location.href = 'list.html';
  }
}

// 新着素材カードを生成
function createLatestCard(item) {
  const div = document.createElement("div");
  div.className = "col-lg-2 col-md-4 col-6";
  
  const a = document.createElement("a");
  a.className = "card h-100 text-decoration-none text-body border-0 shadow-sm";
  a.href = `items/${item.slug}/`;
  a.innerHTML = `
    <div class="position-relative">
      <img class="card-img-top object-fit-cover" loading="lazy" src="${item.thumb}" alt="${item.title}" style="height: 160px;">
      <div class="position-absolute top-0 start-0 m-2">
        <span class="badge bg-success">NEW</span>
      </div>
      <div class="position-absolute top-0 end-0 m-2">
        <span class="badge bg-primary">${item.category}</span>
      </div>
    </div>
    <div class="card-body p-3">
      <h6 class="card-title mb-1 small">${item.title}</h6>
      <div class="d-flex flex-wrap gap-1 mb-2">
        ${item.tags.slice(0, 2).map(tag => `<span class="badge bg-light text-dark small">${tag}</span>`).join('')}
        ${item.tags.length > 2 ? `<span class="badge bg-light text-muted small">+${item.tags.length - 2}</span>` : ''}
      </div>
      <small class="text-muted">${item.width || "?"}×${item.height || "?"}</small>
    </div>
  `;
  
  // ホバー効果
  a.onmouseenter = () => {
    a.classList.add("shadow");
    a.style.transform = "translateY(-2px)";
  };
  a.onmouseleave = () => {
    a.classList.remove("shadow");
    a.style.transform = "translateY(0)";
  };
  
  div.appendChild(a);
  return div;
}

// 新着素材を表示
function renderLatestItems(items) {
  const container = document.getElementById("latestItems");
  
  // 最新の8つの素材を取得
  const latestItems = items.slice(-8).reverse();
  
  container.innerHTML = "";
  latestItems.forEach(item => {
    container.appendChild(createLatestCard(item));
  });
}

// 初期化
(async function(){
  try {
    const res = await fetch("assets.json");
    const data = await res.json();
    let items = data.items || [];

    // thumbnailPathをthumbプロパティとして設定
    items = items.map(item => ({
      ...item,
      thumb: item.thumbnailPath
    }));

    const cats = Array.from(new Set(items.map(x => x.category))).sort();
    const tags = Array.from(new Set(items.flatMap(x => x.tags))).sort();

    // 統計情報を更新
    document.getElementById("totalItems").textContent = items.length;
    document.getElementById("totalCategories").textContent = cats.length;
    document.getElementById("totalTags").textContent = tags.length;

    // 新着素材を表示
    renderLatestItems(items);
    
  } catch (error) {
    console.error("データの読み込みに失敗しました:", error);
  }
})();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="includes/nav.js"></script>
</body>
</html>
